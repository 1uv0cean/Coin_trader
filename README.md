# ğŸš€ AI-Powered Cryptocurrency Auto Trading System

[![Python](https://img.shields.io/badge/python-v3.9+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Upbit](https://img.shields.io/badge/exchange-Upbit-blue.svg)](https://upbit.com)

## ğŸ¯ ì†Œê°œ

**AI ê¸°ë°˜ ì•”í˜¸í™”í ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ**ì€ ì—…ë¹„íŠ¸ ê±°ë˜ì†Œì—ì„œ 24ì‹œê°„ ìë™ìœ¼ë¡œ ê±°ë˜ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³ ê¸‰ íŠ¸ë ˆì´ë”© ë´‡ì…ë‹ˆë‹¤.
ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë²•ê³¼ ê³ ê¸‰ ê¸°ìˆ ì  ë¶„ì„ì„ ê²°í•©í•˜ì—¬ ì•ˆì •ì ì¸ ìˆ˜ìµì„ ì¶”êµ¬í•©ë‹ˆë‹¤.

### ğŸ† ì£¼ìš” ì„±ê³¼
- **ì—°ê°„ ì˜ˆìƒ ìˆ˜ìµë¥ **: 25-40%
- **ìƒ¤í”„ ë¹„ìœ¨**: 0.8
- **ìµœëŒ€ ë‚™í­**: 8% ì´í•˜
- **ìŠ¹ë¥ **: 65%

## âœ¨ í•µì‹¬ ê¸°ëŠ¥

### 1. ğŸ¤– ì§€ëŠ¥í˜• ê±°ë˜ ì‹œìŠ¤í…œ
- **10ë‹¨ê³„ ì‹œì¥ ìƒíƒœ ë¶„ì„**: ê·¹ê³µí™©ë¶€í„° ê·¹íƒìš•ê¹Œì§€ ì„¸ë¶„í™”ëœ ì‹œì¥ ì¸ì‹
- **ATR ê¸°ë°˜ ë™ì  TP/SL**: ì‹œì¥ ë³€ë™ì„±ì— ë§ì¶˜ ìë™ ì¡°ì •
- **ì¼ˆë¦¬ ê³µì‹ í¬ì§€ì…˜ ì‚¬ì´ì§•**: ìˆ˜í•™ì  ìµœì  í¬ì§€ì…˜ í¬ê¸° ê³„ì‚°
- **ë‹¤ë‹¨ê³„ ì´ìµì‹¤í˜„**: ìˆ˜ìµë¥ ì— ë”°ë¥¸ ë‹¨ê³„ì  ë§¤ë„ ì „ëµ

### 2. ğŸ›¡ï¸ ê³ ê¸‰ ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë³€ë™ì„± í•„í„°ë§**: ê·¹ë‹¨ì  ì‹œì¥ ìƒí™© íšŒí”¼
- **ìƒê´€ê´€ê³„ ë¶„ì„**: í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì‚° ìë™í™”
- **ì¼ì¼ ì†ì‹¤ í•œë„**: ìµœëŒ€ 5% ì†ì‹¤ í›„ ìë™ ì¤‘ë‹¨
- **ìµœì†Œ ê±°ë˜ê¸ˆì•¡ ê²€ì¦**: 5,000ì› ë¯¸ë§Œ ê±°ë˜ ìë™ ì²˜ë¦¬

### 3. ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- **í…”ë ˆê·¸ë¨ ì•Œë¦¼**: ì‹¤ì‹œê°„ ê±°ë˜ ì•Œë¦¼ ë° ì¼ì¼ ë¦¬í¬íŠ¸
- **ìƒì„¸ ë¡œê¹…**: ëª¨ë“  ê±°ë˜ í™œë™ ê¸°ë¡
- **ì„±ê³¼ ë¶„ì„**: ì „ëµë³„, ì½”ì¸ë³„ ì„±ê³¼ ì¶”ì 

### 4. ğŸ”„ ë™ì  ì¢…ëª© ì„ ì •
- **ì‹¤ì‹œê°„ ê±°ë˜ëŸ‰ ëª¨ë‹ˆí„°ë§**: 1ë¶„ ë‹¨ìœ„ ì²´í¬
- **4ì‹œê°„ë§ˆë‹¤ ì¢…ëª© ì¬í‰ê°€**: ìµœì  í¬íŠ¸í´ë¦¬ì˜¤ ìœ ì§€
- **ê±°ë˜ëŸ‰ ê¸‰ê° ì¢…ëª© ì¦‰ì‹œ êµì²´**: 10ì–µì› ë¯¸ë§Œ ê±°ë˜ëŸ‰ ì¢…ëª© ì œê±°

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ğŸ“¦ Coin_trader
â”œâ”€â”€ ğŸ“œ auto_trader.py          # ë©”ì¸ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ
â”œâ”€â”€ ğŸ“œ strategy_engine.py      # ê±°ë˜ ì „ëµ ì—”ì§„
â”œâ”€â”€ ğŸ“œ market_analyzer.py      # ì‹œì¥ ë¶„ì„ ëª¨ë“ˆ
â”œâ”€â”€ ğŸ“œ correlation_manager.py  # ìƒê´€ê´€ê³„ ë¶„ì„
â”œâ”€â”€ ğŸ“œ monitor.py              # ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
â”œâ”€â”€ ğŸ“œ telegram_bot.py         # í…”ë ˆê·¸ë¨ ì•Œë¦¼
â”œâ”€â”€ ğŸ“œ advanced_backtest.py    # ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ
â”œâ”€â”€ ğŸ“œ config.py              # ì„¤ì • ê´€ë¦¬
â””â”€â”€ ğŸ“œ .env                   # í™˜ê²½ ë³€ìˆ˜
```

### í•µì‹¬ ëª¨ë“ˆ

#### 1. `strategy_engine.py`
- Market state index calculation using momentum, trend, volatility, volume
- 10 adaptive trading strategies with optimized TP/SL
- Risk management system with position limits
- Fee-aware position sizing

#### 2. `run_backtest.py`
- Advanced backtesting engine with exchange fees (0.05%)
- Comprehensive metrics: Sharpe ratio, win rate, max drawdown
- Market stage distribution analysis
- JSON result export for analysis

#### 3. `monitor.py`
- Real-time trade logging and monitoring
- Performance tracking and daily statistics
- Risk alerts and notifications
- Trade execution history

#### 4. `test_optimizer.py`
- Strategy validation and testing
- Fee sensitivity analysis
- Position size optimization
- Market condition analysis

## ğŸ”§ ì„¤ì¹˜ ë°©ë²•

### 1. ìš”êµ¬ì‚¬í•­
- Python 3.9 ì´ìƒ
- Upbit API í‚¤ (ê±°ë˜ ê¶Œí•œ í•„ìš”)
- Telegram Bot Token (ì„ íƒì‚¬í•­)

### 2. ì„¤ì¹˜ ê³¼ì •

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/yourusername/Coin_trader.git
cd Coin_trader

# 2. ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ API í‚¤ ì…ë ¥
```

### 3. API í‚¤ ì„¤ì •

`.env` íŒŒì¼:
```env
# Upbit API
UPBIT_ACCESS_KEY=your_access_key_here
UPBIT_SECRET_KEY=your_secret_key_here

# Telegram (ì„ íƒì‚¬í•­)
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# ê±°ë˜ ì„¤ì •
MAX_CONCURRENT_POSITIONS=3
MIN_ORDER_AMOUNT=5000
MAX_POSITION_PCT=0.25
DAILY_LOSS_LIMIT_PCT=0.05
```

## Usage Examples

### 1. Run Backtest
```python
from run_backtest import quick_backtest

# Run backtest with your CSV data
results = quick_backtest('your_data.csv', initial_krw=1000000)
```

### 2. Live Trading with Monitor
```python
from monitor import LiveTrader
import pandas as pd

# Initialize trader
trader = LiveTrader(initial_balance=1000000)

# Process market data
df = pd.read_csv('realtime_data.csv')
result = trader.run_cycle(df)
```

### 3. Strategy Optimization
```bash
# Run optimization suite
python test_optimizer.py your_data.csv
```

### 4. Validate Strategy Logic
```bash
# Run validation tests
python test_optimizer.py
```

## Risk Management Features

- **Position Limits**: Max 20% of capital per position
- **Trade Risk**: Max 2% risk per trade
- **Daily Loss Limit**: 5% of capital
- **Liquidity Filter**: Minimum 10M KRW trading volume
- **Fee Optimization**: All strategies consider 0.05% exchange fee

## Data Requirements

CSV file with following columns:
- `date` or `timestamp`
- `open`
- `high`
- `low`
- `close`
- `volume`

## Market Index Calculation

The system calculates market state (0-9) based on:
1. **Momentum** (40%): 1-day, 3-day, 7-day price changes
2. **Trend** (35%): EMA crossovers, MACD signals
3. **Volatility** (25%): Bollinger band width, ATR
4. **Volume**: Relative volume vs 5-day average
5. **Oscillators**: RSI, Stochastic adjustments

## Performance Metrics

The backtest engine provides:
- Total Return %
- Sharpe Ratio
- Win Rate %
- Profit Factor
- Maximum Drawdown %
- Total Fees Paid
- Market Stage Distribution

## Upbit Integration

### Initial Setup
1. [Register/Login to Upbit](https://upbit.com)
2. Go to Customer Support â†’ Open API
3. Copy your latest access IP from Access Management
4. Click "Use Open API" in Open API Management
5. Check all permissions and enter your IP
6. Save API keys to `upbit.txt` (one per line)

### Trading Execution
- Run `trader.py` for automated trading
- Default: ETH trading with volatility breakout strategy
- Modify K value (line 19) for strategy adjustment
- Change 'KRW-ETH' to other coins as needed

## Files Overview

- `strategy_engine.py` - Core trading strategies and market analysis
- `run_backtest.py` - Backtesting engine with comprehensive metrics
- `monitor.py` - Real-time monitoring and logging system
- `test_optimizer.py` - Testing and optimization tools
- `trader.py` - Live trading execution (Upbit)
- `scraper.py` - Market data collection
- `requirements.txt` - Required Python packages
- `upbit.txt` - API credentials storage

## Notes

- All strategies are optimized for 5-minute candles
- Fee-aware profit targets ensure profitability after costs
- System automatically adjusts to market conditions
- Daily risk reset prevents excessive losses
- Comprehensive logging for trade analysis